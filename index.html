<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessible Map</title>

<style>
body { margin:0; font-family:system-ui,sans-serif; background:#f4f6f8; }

/* ===== Header ===== */
header {
  background:#2d8cf0;
  color:white;
  padding:20px;
  text-align:center;
  position:relative;
}
header h2 { margin:0; font-size:26px; }
header p { margin:6px 0 0; }

.menu-icon{
  position:absolute;
  top:20px;
  right:20px;
  font-size:26px;
  cursor:pointer;
}

.dropdown{
  position:absolute;
  top:60px;
  right:20px;
  background:white;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
  display:none;
  flex-direction:column;
  overflow:hidden;
  z-index:999;
}
.dropdown button{
  padding:10px 16px;
  border:none;
  background:white;
  cursor:pointer;
  text-align:left;
}
.dropdown button:hover{ background:#f0f0f0; }

/* ===== Top Buttons ===== */
.top-buttons{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:18px 0;
}
.top-buttons button{
  padding:8px 18px;
  border-radius:999px;
  border:none;
  background:white;
  color:#2d8cf0;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}

/* ===== Section ===== */
.section{
  display:none;
  background:white;
  margin:12px auto;
  padding:24px;
  border-radius:20px;
  max-width:900px;
  line-height:1.8;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}

.notice{
  font-size:13px;
  color:#888;
  margin-top:6px;
}

.highlight{
  background:#eaf4ff;
  padding:20px;
  border-radius:16px;
  margin-top:20px;
  font-weight:500;
}

img.ud-image{
  width:100%;
  border-radius:12px;
  margin:12px 0;
}

/* ===== Map Area ===== */
.container{ max-width:1100px; margin:auto; padding:12px; }

#map{
  height:65vh;
  border-radius:18px;
  margin-top:12px;
}

.search-box{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid #ccc;
}

.form-toggle{
  margin:14px auto;
  display:block;
  padding:12px 22px;
  border-radius:999px;
  border:none;
  background:#2d8cf0;
  color:white;
  cursor:pointer;
}

.form-card{
  background:white;
  border-radius:20px;
  padding:16px;
  margin-bottom:12px;
  display:none;
}

.form-card.show{ display:block; }

input[type="text"]{
  width:100%;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid #ccc;
  margin-bottom:10px;
}

.tags{ display:flex; gap:14px; margin:10px 0; }

.post-btn{
  width:100%;
  padding:12px;
  border-radius:999px;
  border:none;
  background:#2d8cf0;
  color:white;
  cursor:pointer;
}

.filters{
  display:flex;
  gap:8px;
  margin:12px 0;
  flex-wrap:wrap;
}

.filters button{
  padding:6px 14px;
  border-radius:999px;
  border:none;
  cursor:pointer;
}

.filters .active{
  background:#2d8cf0;
  color:white;
}
</style>
</head>

<body>

<header>
  <div class="menu-icon" onclick="toggleMenu()">☰</div>
  <h2>Accessible Map</h2>
  <p>Anyone can share accessibility information</p>

  <div class="dropdown" id="menu">
    <button onclick="toggleSection('howto')">How to Use</button>
    <button onclick="toggleSection('ud')">Universal Design</button>
  </div>
</header>

<div class="top-buttons">
  <button onclick="toggleSection('howto')">How to Use</button>
  <button onclick="toggleSection('ud')">Universal Design</button>
</div>

<!-- ===== How to Use ===== -->
<div class="section" id="howto">
<h3>How to Use / 使い方</h3>

<p>1. Search for a place using "Search places on map".<br>
Search places on mapで施設を検索します。</p>

<p>2. The location will appear at the center of the map. Click the map to select the place.<br>
検索した場所が地図の中央に表示されます。地図をクリックして施設を選択します。</p>

<p>3. Add a comment and select tags, then press "Post".<br>
コメントとタグを選択し、「Post」を押して投稿します。</p>

<p>4. Posts remain visible even after reloading the page, and anyone can see them.<br>
投稿はページを再読み込みしても表示され、誰でも見ることができます。</p>

<p>5. You can filter posts by tags.<br>
タグで絞り込み表示をすることもできます。</p>

<p class="notice">
※ Currently, image uploads are unavailable due to system limitations.<br>
※ 現在、システムの都合上、画像の投稿はできません。
</p>
</div>

<!-- ===== Universal Design ===== -->
<div class="section" id="ud">
<h3>What is Universal Design? / ユニバーサルデザインとは？</h3>


<p>
Universal Design is the idea of creating environments and services that can be used by everyone, regardless of age, ability, language, or background.
</p>

<p>
ユニバーサルデザインとは、年齢や障がいの有無、言語、国籍などに関係なく、すべての人が使いやすい環境やサービスをつくる考え方です。
</p>

<p>
Examples include slopes, accessible toilets, and easy-to-understand signs.
</p>

<p>
例えば、スロープ、バリアフリートイレ、わかりやすい案内表示などがあります。
</p>

<p>
Universal Design benefits everyone — elderly people, children, tourists, and even people with temporary injuries.
</p>

<p>
ユニバーサルデザインは、高齢者や子ども、観光客、一時的にけがをしている人など、すべての人に役立ちます。
</p>

<div class="highlight">
This website is not limited to Guam.  
You can post accessibility information from anywhere in the world.  

Your post can help turn someone’s “I want to go” into “I can go.”  

We hope this small action will contribute to building a world that is fair, inclusive, and peaceful — where no one is left at a disadvantage.
<br><br>
このウェブサイトはグアムに限らず、世界中の施設を投稿できます。  

あなたの投稿が、誰かの「行きたい」を「行ける」に変える力になります。  

誰も不利にならない、公平で包摂的、そして平和な社会につながることを願っています。
</div>

<p style="margin-top:20px;">
We encourage you to look around your community and discover examples of Universal Design.
<br>
ぜひ皆さんの身の回りでもユニバーサルデザインを探してみてください。
</p>

</div>

<!-- ===== Map Area ===== -->
<div class="container">
<input id="searchBox" class="search-box" placeholder="Search places on map">
<button class="form-toggle" onclick="toggleForm()">＋ Add new spot</button>

<div class="form-card" id="formCard">
  <input id="placeName" type="text" placeholder="Place name">
  <input id="commentInput" type="text" placeholder="Comment">

  <div class="tags">
    <label><input type="checkbox" value="slope">#slope</label>
    <label><input type="checkbox" value="wheelchair">#wheelchair</label>
    <label><input type="checkbox" value="toilet">#toilet</label>
  </div>

  <button class="post-btn" onclick="addSpot()">Post</button>
</div>

<div class="filters">
  <button class="active" onclick="filterMarkers('all',this)">Show all</button>
  <button onclick="filterMarkers('slope',this)">#slope</button>
  <button onclick="filterMarkers('wheelchair',this)">#wheelchair</button>
  <button onclick="filterMarkers('toilet',this)">#toilet</button>
</div>

<div id="map"></div>
</div>

<script>
let map;
let markers=[];
let selectedLocation=null;

function initMap(){
  const center={lat:13.4443,lng:144.7937};
  map=new google.maps.Map(document.getElementById("map"),{
    zoom:12,
    center:center
  });

  const searchBox=new google.maps.places.SearchBox(
    document.getElementById("searchBox")
  );

  searchBox.addListener("places_changed",()=>{
    const places=searchBox.getPlaces();
    if(!places.length) return;
    const place=places[0];
    if(!place.geometry) return;
    map.panTo(place.geometry.location);
    map.setZoom(15);
    selectedLocation=place.geometry.location;
  });

  map.addListener("click",(e)=>{
    selectedLocation=e.latLng;
  });
}

function addSpot(){
  if(!selectedLocation){
    alert("Please select a location on the map.");
    return;
  }

  const name=document.getElementById("placeName").value;
  const comment=document.getElementById("commentInput").value;
  const tags=[...document.querySelectorAll(".tags input:checked")]
  .map(cb=>cb.value);

  const marker=new google.maps.Marker({
    position:selectedLocation,
    map:map
  });

  marker.tags=tags;

  const info=new google.maps.InfoWindow({
    content:`<strong>${name}</strong><br>${comment}<br>${tags.join(", ")}`
  });

  marker.addListener("click",()=>info.open(map,marker));
  markers.push(marker);

  document.getElementById("placeName").value="";
  document.getElementById("commentInput").value="";
  document.querySelectorAll(".tags input").forEach(cb=>cb.checked=false);
}

function filterMarkers(tag,btn){
  document.querySelectorAll(".filters button")
  .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  markers.forEach(m=>{
    if(tag==="all"||m.tags.includes(tag)){
      m.setMap(map);
    }else{
      m.setMap(null);
    }
  });
}

function toggleMenu(){
  const m=document.getElementById("menu");
  m.style.display=m.style.display==="flex"?"none":"flex";
}

function toggleSection(id){
  const s=document.getElementById(id);
  s.style.display=s.style.display==="block"?"none":"block";
}

function toggleForm(){
  document.getElementById("formCard").classList.toggle("show");
}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPGlb-Wo-6h4mihUxTWglq0meRqv6zUyM&libraries=places&callback=initMap&language=en" async defer></script>

</body>
</html>
